<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0b1d3f" />
    <title>أول راتب | Mini App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&family=IBM+Plex+Sans+Arabic:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
     <button id="signinButton">تسجيل الدخول</button>
    <div id="root"></div>
    <script src="https://cdn.marmot-cloud.com/npm/hylid-bridge/2.10.0/index.js"></script>
    <script>
      (function() {
        function callAuth() {
          if (!window.my) {
            console.warn('Hylid bridge not ready, retrying...');
            setTimeout(callAuth, 200);
            return;
          }
          my.getAuthCode({
            scopes: ['auth_base'],
            success: (res) => {
              my.alert({ content: res.authCode });
            },
            fail: (res) => {
              console.log(res.authErrorScopes);
            },
          });
        }

        document.addEventListener('DOMContentLoaded', function() {
          const btn = document.getElementById('signinButton');
          if (!btn) return;
          btn.addEventListener('click', function() {
            callAuth();
          });
        });
      })();
    </script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
